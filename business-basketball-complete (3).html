<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Basketball - Business & Sports News</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        /* Header */
        header {
            background: #1a1a1a;
            color: white;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .top-bar {
            background: #000;
            padding: 8px 20px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .current-date {
            font-weight: 500;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #e60000;
            text-decoration: none;
            letter-spacing: -1px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            transition: border-color 0.3s;
        }

        nav a:hover, nav a.active {
            border-bottom-color: #e60000;
        }

        /* Live Scores */
        .live-scores {
            background: #fff;
            border-bottom: 2px solid #eee;
            padding: 15px 0;
            display: none;
        }

        .live-scores.active {
            display: block;
        }

        .scores-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .scores-title {
            font-weight: bold;
            color: #e60000;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .live-pulse {
            width: 8px;
            height: 8px;
            background: #e60000;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .scores-scroll {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            flex: 1;
            padding: 5px 0;
        }

        .scores-scroll::-webkit-scrollbar {
            height: 6px;
        }

        .scores-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .scores-scroll::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        .score-item {
            background: #f8f8f8;
            padding: 10px 15px;
            border-radius: 6px;
            min-width: 200px;
            cursor: pointer;
            border: 2px solid #e60000;
        }

        .score-teams {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .team {
            font-weight: 600;
            font-size: 14px;
        }

        .score-time {
            font-size: 11px;
            color: #666;
            text-align: center;
            font-weight: 600;
        }

        /* Featured Section */
        .featured-section {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .featured-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .featured-title {
            font-size: 28px;
            font-weight: bold;
            color: #1a1a1a;
        }

        .featured-article {
            position: relative;
            height: 500px;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .featured-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.7;
        }

        .featured-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 40px;
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            color: white;
        }

        .featured-article-title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .featured-excerpt {
            font-size: 18px;
            color: #ddd;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .category-tag {
            display: inline-block;
            background: #e60000;
            color: white;
            padding: 5px 12px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            border-radius: 3px;
            margin-bottom: 15px;
        }

        .featured-edit-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .featured-article:hover .featured-edit-btn {
            opacity: 1;
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 1fr 350px;
            gap: 30px;
        }

        .column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e60000;
        }

        .column-title {
            font-size: 24px;
            font-weight: bold;
            color: #1a1a1a;
        }

        .add-article-btn {
            background: #e60000;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }

        .articles-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .article-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: box-shadow 0.3s;
            position: relative;
        }

        .article-card:hover {
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .article-card:hover .article-edit-btn,
        .article-card:hover .article-delete-btn {
            opacity: 1;
        }

        .article-edit-btn, .article-delete-btn {
            position: absolute;
            top: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .article-edit-btn {
            right: 80px;
        }

        .article-delete-btn {
            right: 10px;
            background: rgba(220, 0, 0, 0.9);
        }

        .article-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .article-content {
            padding: 20px;
        }

        .article-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #1a1a1a;
        }

        .article-excerpt {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 14px;
        }

        .article-meta {
            display: flex;
            gap: 15px;
            font-size: 12px;
            color: #999;
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .ad-space {
            background: white;
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            color: #999;
            font-size: 14px;
            position: relative;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            resize: vertical;
            overflow: auto;
        }

        .ad-space:hover .edit-ad-btn {
            opacity: 1;
        }

        .edit-ad-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #666;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .ad-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        .admin-content {
            max-width: 900px;
            margin: 50px auto;
            background: white;
            border-radius: 12px;
            padding: 40px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .close-admin {
            background: none;
            border: none;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        input[type="text"],
        input[type="url"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .submit-btn {
            background: #e60000;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: #cc0000;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        .image-inputs {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .image-input-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .image-input-row input {
            flex: 1;
        }

        .remove-image-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .add-image-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 5px;
        }

        /* Article Modal */
        .article-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 3000;
            overflow-y: auto;
        }

        .modal-content {
            max-width: 900px;
            margin: 50px auto;
            background: white;
            border-radius: 12px;
            padding: 60px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }

        .modal-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .modal-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            color: #666;
        }

        .modal-body {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 40px;
        }

        .modal-body p {
            margin-bottom: 20px;
        }

        .modal-body img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
        }

        /* Comment Section Styles */
        .comments-section {
            border-top: 2px solid #eee;
            padding-top: 40px;
            margin-top: 40px;
        }

        .comments-header {
            font-size: 20px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 24px;
        }

        .comment-composer {
            margin-bottom: 32px;
        }

        .comment-input {
            width: 100%;
            min-height: 100px;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: inherit;
            font-size: 15px;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .comment-input:focus {
            outline: none;
            border-color: #e60000;
        }

        .composer-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 12px;
        }

        .cancel-btn {
            background: transparent;
            color: #4a5568;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .post-comment-btn {
            background: #e60000;
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }

        .post-comment-btn:hover {
            background: #cc0000;
        }

        .comments-list {
            margin-top: 24px;
        }

        .comment {
            margin-bottom: 24px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e60000 0%, #990000 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
            flex-shrink: 0;
        }

        .comment-info {
            flex: 1;
        }

        .comment-author {
            font-weight: 600;
            color: #2d3748;
            font-size: 15px;
        }

        .comment-time {
            color: #718096;
            font-size: 13px;
        }

        .comment-body {
            margin-left: 52px;
            color: #2d3748;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .comment-actions {
            margin-left: 52px;
            display: flex;
            gap: 20px;
        }

        .comment-action {
            background: none;
            border: none;
            color: #718096;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            padding: 4px 0;
        }

        .comment-action:hover {
            color: #e60000;
        }

        .comment-action.liked {
            color: #e60000;
        }

        .replies {
            margin-left: 52px;
            margin-top: 20px;
            padding-left: 20px;
            border-left: 2px solid #e2e8f0;
        }

        .reply {
            margin-bottom: 20px;
        }

        .reply-composer {
            display: none;
            margin-left: 52px;
            margin-top: 16px;
        }

        .reply-composer.show {
            display: block;
        }

        .reply-input {
            min-height: 70px;
            font-size: 14px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .name-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 5000;
            align-items: center;
            justify-content: center;
        }

        .name-modal.show {
            display: flex;
        }

        .name-modal-content {
            background: white;
            padding: 32px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
        }

        .name-modal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #2d3748;
        }

        .name-modal-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 16px;
        }

        .name-modal-btn {
            background: #e60000;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="top-bar">
            <div>Live Scores | Breaking News</div>
            <div class="current-date" id="currentDate"></div>
        </div>
        <div class="nav-container">
            <a href="#" class="logo">BUSINESS BASKETBALL</a>
            <nav>
                <ul id="navTabs">
                    <li><a href="#" class="active" data-view="all">Home</a></li>
                    <li><a href="#" data-view="business">Business</a></li>
                    <li><a href="#" data-view="sports">Sports</a></li>
                </ul>
            </nav>
            <button class="add-article-btn" onclick="openTabManager()" style="font-size: 11px; padding: 6px 12px; display: none;" id="manageTabsBtn">Manage Tabs</button>
        </div>
    </header>

    <!-- Live NBA Scores (only shows when games are live) -->
    <div class="live-scores" id="liveScoresBar">
        <div class="scores-container">
            <div class="scores-title">
                <span class="live-pulse"></span>
                LIVE NBA
            </div>
            <div class="scores-scroll" id="liveScores">
                <!-- Live scores will be dynamically inserted here -->
            </div>
        </div>
    </div>

        <!-- Featured Article Section -->
    <div class="featured-section" id="featuredSection">
        <div class="featured-header">
            <h2 class="featured-title">Featured</h2>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button class="add-article-btn" onclick="adminLogin()" id="adminLoginBtn">Admin Login</button>
                <button class="add-article-btn" onclick="resetWebsite()" id="resetBtn" style="display: none; background: #dc3545;">Reset Website</button>
                <button class="add-article-btn" onclick="setFeaturedArticle()" style="display: none;" id="setFeaturedBtn">Set Featured Article</button>
            </div>
        </div>
        <div id="featuredArticleContainer">
            <!-- Featured article will be dynamically inserted here -->
        </div>
    </div>

    <div class="main-content">
        <!-- Business Column -->
        <div class="business-column">
            <div class="column-header">
                <h2 class="column-title">Business</h2>
                <button class="add-article-btn" onclick="openArticleForm('business')" style="display: none;" id="addBusinessBtn">+ Add Article</button>
            </div>
            <div class="articles-list" id="businessArticles">
                <!-- Business articles will be dynamically inserted here -->
            </div>
        </div>

        <!-- Sports Column -->
        <div class="sports-column">
            <div class="column-header">
                <h2 class="column-title">Sports</h2>
                <button class="add-article-btn" onclick="openArticleForm('sports')" style="display: none;" id="addSportsBtn">+ Add Article</button>
            </div>
            <div class="articles-list" id="sportsArticles">
                <!-- Sports articles will be dynamically inserted here -->
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="ad-space" id="ad1" style="height: 250px;">
                <button class="edit-ad-btn" onclick="editAd('ad1')">Edit</button>
                <div class="ad-content">
                    <strong>Advertisement Space</strong><br>
                    300x250 Ad Unit
                </div>
            </div>

            <div class="ad-space" id="ad2" style="height: 600px;">
                <button class="edit-ad-btn" onclick="editAd('ad2')">Edit</button>
                <div class="ad-content">
                    <strong>Advertisement Space</strong><br>
                    300x600 Ad Unit
                </div>
            </div>

            <div class="ad-space" id="ad3" style="height: 250px;">
                <button class="edit-ad-btn" onclick="editAd('ad3')">Edit</button>
                <div class="ad-content">
                    <strong>Advertisement Space</strong><br>
                    300x250 Ad Unit
                </div>
            </div>
        </aside>
    </div>

    <!-- Article Form Modal -->
    <div class="admin-panel" id="articlePanel">
        <div class="admin-content">
            <div class="admin-header">
                <h2 id="articleFormTitle">Add New Article</h2>
                <button class="close-admin" onclick="closeArticleForm()">&times;</button>
            </div>
            <form id="articleForm" onsubmit="saveArticle(event)">
                <input type="hidden" id="articleId" name="id">
                <input type="hidden" id="articleCategory" name="category">
                
                <div class="form-group">
                    <label>Article Title *</label>
                    <input type="text" id="articleTitle" name="title" required placeholder="Enter article headline">
                </div>
                
                <div class="form-group">
                    <label>Author Name *</label>
                    <input type="text" id="articleAuthor" name="author" required placeholder="Your name">
                </div>
                
                <div class="form-group">
                    <label>Featured Image URL *</label>
                    <input type="url" id="articleImage" name="image" required placeholder="https://example.com/image.jpg">
                </div>
                
                <div class="form-group">
                    <label>Excerpt (Short Description) *</label>
                    <textarea id="articleExcerpt" name="excerpt" required placeholder="Write a brief summary (2-3 sentences)"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Full Article Content *</label>
                    <textarea id="articleContent" name="content" required placeholder="Write your full article here..." style="min-height: 250px;"></textarea>
                    <p style="font-size: 12px; color: #666; margin-top: 8px;">
                        ðŸ’¡ <strong>Tip:</strong> To add images within your article, type <code>[IMAGE1]</code>, <code>[IMAGE2]</code>, etc. where you want each image to appear. Then add the image URLs below.
                    </p>
                </div>

                <div class="form-group">
                    <label>Images for Article (Optional)</label>
                    <p style="font-size: 12px; color: #666; margin-bottom: 10px;">
                        Add image URLs below, then use <code>[IMAGE1]</code>, <code>[IMAGE2]</code>, <code>[IMAGE3]</code> in your article content above to place them exactly where you want.
                    </p>
                    <div class="image-inputs" id="articleImages">
                    </div>
                    <button type="button" class="add-image-btn" onclick="addImageInput()">+ Add Image</button>
                </div>
                
                <button type="submit" class="submit-btn" id="submitArticleBtn">Publish Article</button>
                <button type="button" class="delete-btn" id="deleteArticleBtn" onclick="deleteArticle()" style="display: none;">Delete Article</button>
            </form>
        </div>
    </div>

    <!-- Ad Edit Modal -->
    <div class="admin-panel" id="adPanel">
        <div class="admin-content">
            <div class="admin-header">
                <h2>Edit Advertisement Space</h2>
                <button class="close-admin" onclick="closeAdForm()">&times;</button>
            </div>
            <form id="adForm" onsubmit="saveAd(event)">
                <input type="hidden" id="adId">
                
                <div class="form-group">
                    <label>Ad Height (pixels)</label>
                    <input type="number" id="adHeight" name="height" placeholder="250">
                </div>
                
                <div class="form-group">
                    <label>Ad Content (HTML or Text)</label>
                    <textarea id="adContent" name="content" placeholder="Paste your ad code here or enter custom text" style="min-height: 150px;"></textarea>
                </div>
                
                <button type="submit" class="submit-btn">Save Ad</button>
            </form>
        </div>
    </div>

    <!-- Article Modal -->
    <div class="article-modal" id="articleModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <div id="modalArticleContent">
                <!-- Article content will be dynamically inserted here -->
            </div>
            <!-- Comments Section -->
            <div class="comments-section">
                <div class="comments-header" id="commentsSectionTitle">Comments</div>
                
                <div class="comment-composer">
                    <textarea class="comment-input" id="mainCommentInput" placeholder="Share your thoughts..."></textarea>
                    <div class="composer-actions">
                        <button class="cancel-btn" onclick="clearCommentInput()">Clear</button>
                        <button class="post-comment-btn" onclick="postComment()">Post Comment</button>
                    </div>
                </div>

                <div class="comments-list" id="commentsList">
                    <!-- Comments will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Name Input Modal -->
    <div class="name-modal" id="nameModal">
        <div class="name-modal-content">
            <h3 class="name-modal-title">What's your name?</h3>
            <input type="text" class="name-modal-input" id="nameInput" placeholder="Enter your name">
            <button class="name-modal-btn" onclick="submitName()">Continue</button>
        </div>
    </div>

    <!-- Featured Article Selection Modal -->
    <div class="admin-panel" id="featuredPanel">
        <div class="admin-content">
            <div class="admin-header">
                <h2>Select Featured Article</h2>
                <button class="close-admin" onclick="closeFeaturedPanel()">&times;</button>
            </div>
            <div id="featuredArticlesList">
                <!-- Article list will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Tab Manager Modal -->
    <div class="admin-panel" id="tabPanel">
        <div class="admin-content">
            <div class="admin-header">
                <h2>Manage Navigation Tabs</h2>
                <button class="close-admin" onclick="closeTabManager()">&times;</button>
            </div>
            
            <div style="margin-bottom: 30px;">
                <h3 style="font-size: 16px; margin-bottom: 15px; color: #2d3748;">Current Tabs</h3>
                <div id="currentTabsList">
                    <!-- Tabs will be listed here -->
                </div>
            </div>

            <div style="border-top: 2px solid #eee; padding-top: 30px;">
                <h3 style="font-size: 16px; margin-bottom: 15px; color: #2d3748;">Add New Tab</h3>
                <form id="tabForm" onsubmit="addTab(event)">
                    <div class="form-group">
                        <label>Tab Name *</label>
                        <input type="text" id="tabName" required placeholder="e.g., Politics, Tech, Culture">
                    </div>
                    <div class="form-group">
                        <label>Tab Type *</label>
                        <select id="tabType" required>
                            <option value="category">Article Category (creates new article section)</option>
                            <option value="link">External Link</option>
                        </select>
                    </div>
                    <div class="form-group" id="tabLinkGroup" style="display: none;">
                        <label>External URL</label>
                        <input type="url" id="tabLink" placeholder="https://example.com">
                    </div>
                    <button type="submit" class="submit-btn">Add Tab</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let articles = JSON.parse(localStorage.getItem('articles')) || [];
        let ads = JSON.parse(localStorage.getItem('ads')) || {};
        let comments = JSON.parse(localStorage.getItem('comments')) || {};
        let userName = localStorage.getItem('userName') || '';
        let currentArticleId = null;
        let pendingComment = null;
        let pendingReplyTo = null;
        let commentIdCounter = 1;
        let featuredArticleId = localStorage.getItem('featuredArticleId') || null;
        let customTabs = JSON.parse(localStorage.getItem('customTabs')) || [];
        let adminPassword = localStorage.getItem('adminPassword') || null;
        let isAdmin = false;

        // Check admin authentication
        function checkAdmin() {
            if (!adminPassword) {
                // First time setup
                const password = prompt('Set your admin password (you\'ll need this to edit the site):');
                if (password && password.trim()) {
                    adminPassword = password.trim();
                    localStorage.setItem('adminPassword', adminPassword);
                    isAdmin = true;
                    showAdminControls();
                    return true;
                }
                return false;
            }
            
            if (!isAdmin) {
                const input = prompt('Enter admin password:');
                if (input === adminPassword) {
                    isAdmin = true;
                    showAdminControls();
                    return true;
                }
                alert('Incorrect password');
                return false;
            }
            
            return true;
        }

        function adminLogin() {
            checkAdmin();
        }

        function showAdminControls() {
            // Show all admin buttons
            const adminButtons = [
                'manageTabsBtn',
                'setFeaturedBtn',
                'addBusinessBtn',
                'addSportsBtn',
                'resetBtn'
            ];
            
            adminButtons.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) btn.style.display = 'block';
            });
            
            // Hide login button
            const loginBtn = document.getElementById('adminLoginBtn');
            if (loginBtn) loginBtn.style.display = 'none';
            
            // Show edit/delete buttons on articles
            document.querySelectorAll('.article-edit-btn, .article-delete-btn, .edit-ad-btn, .featured-edit-btn').forEach(btn => {
                btn.style.opacity = '1';
                btn.style.pointerEvents = 'auto';
            });
        }

        function hideAdminControls() {
            document.querySelectorAll('.article-edit-btn, .article-delete-btn, .edit-ad-btn, .featured-edit-btn').forEach(btn => {
                btn.style.opacity = '0';
                btn.style.pointerEvents = 'none';
            });
        }

        // Reset entire website
        function resetWebsite() {
            if (!checkAdmin()) return;
            
            const confirmReset = confirm('âš ï¸ WARNING: This will delete EVERYTHING:\n\n- All articles\n- All comments\n- All custom tabs\n- All ad settings\n- Your admin password\n\nYou will need to set a new password.\n\nAre you absolutely sure?');
            
            if (!confirmReset) return;
            
            const doubleCheck = confirm('This cannot be undone. Delete everything and start fresh?');
            
            if (doubleCheck) {
                // Clear all data
                localStorage.clear();
                
                // Reset variables
                articles = [];
                ads = {};
                comments = {};
                customTabs = [];
                featuredArticleId = null;
                adminPassword = null;
                isAdmin = false;
                userName = '';
                
                alert('âœ… Website has been completely reset. The page will now reload.');
                
                // Reload the page
                location.reload();
            }
        }

        // Wrap all admin functions with password check
        function requireAdmin(callback) {
            return function(...args) {
                if (checkAdmin()) {
                    return callback.apply(this, args);
                }
            };
        }

        // Initialize with Super Bowl article
        function initializeWithSuperBowlArticle() {
            // Articles start empty - user can add their own
            // Removed auto-initialization
        }

        // Add Super Bowl article on demand
        function addSuperBowlArticle() {
            const superBowlArticle = {
                id: Date.now(),
                category: 'sports',
                title: 'Ranking the Last 10 Super Bowls by Entertainment Value',
                author: 'Sports Desk',
                image: 'https://images.unsplash.com/photo-1566577739112-5180d4bf9390?w=800',
                excerpt: 'From nail-biting finishes to historic comebacks, we rank the past decade of Super Bowls based on pure entertainment factor. Which championship game kept you on the edge of your seat?',
                content: `The Super Bowl has given us some of the most memorable moments in sports history over the past decade. From 28-3 comebacks to last-second victories, these championship games have delivered drama, excitement, and unforgettable performances.

Here's our ranking of the last 10 Super Bowls by entertainment value:

1. Super Bowl LI (2017) - Patriots vs. Falcons
The greatest comeback in Super Bowl history. Down 28-3 in the third quarter, Tom Brady led the Patriots to an overtime victory. This game had everything: defensive struggles, offensive explosions, and the first overtime in Super Bowl history.

2. Super Bowl XLIX (2015) - Patriots vs. Seahawks
Malcolm Butler's goal-line interception is one of the most shocking plays in NFL history. The final minute alone had multiple lead changes and dramatic moments. Pete Carroll's decision to pass instead of run will be debated forever.

3. Super Bowl LII (2018) - Eagles vs. Patriots
The "Philly Special" and Nick Foles outdueling Tom Brady? Nobody saw this coming. The game featured 1,151 total yards and zero punts in the second half. Pure offensive fireworks from start to finish.

4. Super Bowl XLVII (2013) - Ravens vs. 49ers
The "Blackout Bowl" had everything: a 34-minute power outage, a goal-line stand, and the Harbaugh brothers coaching against each other. The 49ers nearly completed a comeback after trailing 28-6.

5. Super Bowl LIV (2020) - Chiefs vs. 49ers
Patrick Mahomes orchestrated a fourth-quarter comeback, overcoming a 20-10 deficit with three touchdowns in the final six minutes. The young superstar announced his arrival on the biggest stage.

6. Super Bowl LVI (2022) - Rams vs. Bengals
A defensive battle that came down to the final minutes. Aaron Donald and the Rams defense sealed it with a crucial fourth-down stop. The Rams hosting and winning at their home stadium added extra drama.

7. Super Bowl LVIII (2024) - Chiefs vs. 49ers
Another overtime thriller! Patrick Mahomes led his team to victory in overtime, cementing his legacy as one of the all-time greats. The back-and-forth action kept viewers glued to their screens.

8. Super Bowl LVII (2023) - Chiefs vs. Eagles
Two high-powered offenses trading blows, with the Chiefs pulling away late. Jalen Hurts' heroic performance almost wasn't enough against Mahomes' brilliance.

9. Super Bowl LIII (2019) - Patriots vs. Rams
While the 13-3 final score disappointed offensive fans, defensive purists loved watching two elite units battle. The lowest-scoring Super Bowl in history was a chess match between coaching legends.

10. Super Bowl 50 (2016) - Broncos vs. Panthers
Peyton Manning's farewell wasn't the prettiest game, but watching the defensive masterclass from Von Miller and the Broncos was impressive. The legendary quarterback riding off into the sunset with one final championship provided a perfect ending.

Each of these games brought something unique to the table, whether it was historic comebacks, offensive shootouts, or defensive masterpieces. The beauty of the Super Bowl is that you never know which type of game you're going to get â€“ and that unpredictability is what keeps us coming back year after year.`,
                additionalImages: [],
                date: new Date().toLocaleString('en-US', { 
                    month: 'short', 
                    day: 'numeric', 
                    year: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit'
                })
            };
            articles.push(superBowlArticle);
            localStorage.setItem('articles', JSON.stringify(articles));
            renderArticles();
            alert('Super Bowl rankings article added to Sports section!');
        }

        // Update current date
        function updateDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const today = new Date();
            document.getElementById('currentDate').textContent = today.toLocaleDateString('en-US', options);
        }

        // Fetch and display live NBA scores
        async function fetchLiveNBAScores() {
            try {
                // This would be replaced with actual API call
                // For now, we'll check if there are any live games
                const liveScoresBar = document.getElementById('liveScoresBar');
                const liveScoresContainer = document.getElementById('liveScores');
                
                // Simulated check - in production, this would call a real API
                // If there are live games, display them
                const hasLiveGames = false; // Would be determined by API response
                
                if (hasLiveGames) {
                    liveScoresBar.classList.add('active');
                    // Render live scores
                } else {
                    liveScoresBar.classList.remove('active');
                }
            } catch (error) {
                console.error('Error fetching NBA scores:', error);
            }
        }

        // Initialize
        function init() {
            updateDate();
            initializeWithSuperBowlArticle();
            fetchLiveNBAScores();
            renderTabs();
            renderFeaturedArticle();
            renderArticles();
            renderCustomColumns();
            loadAds();
            hideAdminControls();
            
            // Refresh live scores every 30 seconds
            setInterval(fetchLiveNBAScores, 30000);
            
            // Set up tab type selector
            const tabTypeSelect = document.getElementById('tabType');
            if (tabTypeSelect) {
                tabTypeSelect.addEventListener('change', function() {
                    const linkGroup = document.getElementById('tabLinkGroup');
                    linkGroup.style.display = this.value === 'link' ? 'block' : 'none';
                });
            }
        }

        // Render navigation tabs
        function renderTabs() {
            const navTabs = document.getElementById('navTabs');
            const defaultTabs = [
                { name: 'Home', view: 'all', default: true },
                { name: 'Business', view: 'business', default: true },
                { name: 'Sports', view: 'sports', default: true }
            ];
            
            const allTabs = [...defaultTabs, ...customTabs];
            
            navTabs.innerHTML = allTabs.map((tab, index) => {
                if (tab.type === 'link') {
                    return `<li><a href="${tab.link}" target="_blank">${tab.name}</a></li>`;
                } else {
                    const activeClass = index === 0 ? 'active' : '';
                    return `<li><a href="#" class="${activeClass}" data-view="${tab.view}" onclick="switchView('${tab.view}')">${tab.name}</a></li>`;
                }
            }).join('');
        }

        function switchView(view) {
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all columns
            document.querySelectorAll('.business-column, .sports-column, .custom-column').forEach(col => {
                col.style.display = 'none';
            });
            
            if (view === 'all') {
                document.querySelector('.business-column').style.display = 'block';
                document.querySelector('.sports-column').style.display = 'block';
            } else if (view === 'business') {
                document.querySelector('.business-column').style.display = 'block';
            } else if (view === 'sports') {
                document.querySelector('.sports-column').style.display = 'block';
            } else {
                // Show custom column
                const customCol = document.querySelector(`.custom-column[data-category="${view}"]`);
                if (customCol) customCol.style.display = 'block';
            }
        }

        // Render featured article
        function renderFeaturedArticle() {
            const container = document.getElementById('featuredArticleContainer');
            const featured = articles.find(a => a.id === parseInt(featuredArticleId));
            
            if (!featured) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 100px 20px; background: white; border-radius: 12px;">
                        <p style="color: #999; font-size: 16px;">No featured article selected. Click "Set Featured Article" to choose one.</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div class="featured-article" onclick="openArticle(${featured.id})">
                    <button class="featured-edit-btn" onclick="event.stopPropagation(); editArticle(${featured.id})" style="right: 180px;">Edit Article</button>
                    <button class="featured-edit-btn" onclick="event.stopPropagation(); setFeaturedArticle()">Change Featured</button>
                    <img src="${featured.image}" alt="${featured.title}" class="featured-image" onerror="this.src='https://via.placeholder.com/1400x500?text=Image+Not+Found'">
                    <div class="featured-content">
                        <span class="category-tag">${featured.category.toUpperCase()}</span>
                        <h1 class="featured-article-title">${featured.title}</h1>
                        <p class="featured-excerpt">${featured.excerpt}</p>
                        <div class="article-meta">
                            <span>${featured.author}</span>
                            <span>${featured.date}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Set featured article
        function setFeaturedArticle() {
            const panel = document.getElementById('featuredPanel');
            const listContainer = document.getElementById('featuredArticlesList');
            
            if (articles.length === 0) {
                listContainer.innerHTML = '<p style="color: #999; padding: 20px;">No articles available. Create some articles first!</p>';
            } else {
                listContainer.innerHTML = articles.map(article => `
                    <div style="padding: 15px; border: 2px solid #eee; border-radius: 8px; margin-bottom: 15px; cursor: pointer; transition: border-color 0.3s;" 
                         onclick="selectFeaturedArticle(${article.id})"
                         onmouseover="this.style.borderColor='#e60000'" 
                         onmouseout="this.style.borderColor='#eee'">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="${article.image}" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;" 
                                 onerror="this.src='https://via.placeholder.com/80x60'">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 5px;">${article.title}</div>
                                <div style="font-size: 12px; color: #999;">
                                    <span class="category-tag" style="margin-right: 10px;">${article.category.toUpperCase()}</span>
                                    ${article.author} â€¢ ${article.date}
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            panel.style.display = 'block';
        }

        function selectFeaturedArticle(id) {
            featuredArticleId = id;
            localStorage.setItem('featuredArticleId', id);
            renderFeaturedArticle();
            closeFeaturedPanel();
        }

        function closeFeaturedPanel() {
            document.getElementById('featuredPanel').style.display = 'none';
        }

        // Render articles
        function renderArticles() {
            const businessContainer = document.getElementById('businessArticles');
            const sportsContainer = document.getElementById('sportsArticles');
            
            const businessArticles = articles.filter(a => a.category === 'business');
            const sportsArticles = articles.filter(a => a.category === 'sports');
            
            businessContainer.innerHTML = businessArticles.length === 0 
                ? '<div style="color: #999; padding: 20px; text-align: center;">No business articles yet. Click "+ Add Article" to create one.</div>'
                : businessArticles.map(renderArticleCard).join('');
            
            sportsContainer.innerHTML = sportsArticles.length === 0 
                ? '<div style="color: #999; padding: 20px; text-align: center;">No sports articles yet. Click "+ Add Article" to create one.</div>'
                : sportsArticles.map(renderArticleCard).join('');
            
            // Render custom category articles
            customTabs.filter(tab => tab.type === 'category').forEach(tab => {
                const container = document.getElementById(`${tab.view}Articles`);
                if (container) {
                    const categoryArticles = articles.filter(a => a.category === tab.view);
                    container.innerHTML = categoryArticles.length === 0 
                        ? `<div style="color: #999; padding: 20px; text-align: center;">No ${tab.name.toLowerCase()} articles yet. Click "+ Add Article" to create one.</div>`
                        : categoryArticles.map(renderArticleCard).join('');
                }
            });
        }

        function renderArticleCard(article) {
            return `
                <div class="article-card" onclick="openArticle(${article.id})">
                    <button class="article-edit-btn" onclick="event.stopPropagation(); editArticle(${article.id})">Edit</button>
                    <button class="article-delete-btn" onclick="event.stopPropagation(); confirmDeleteArticle(${article.id})">Delete</button>
                    <img src="${article.image}" alt="${article.title}" class="article-image" onerror="this.src='https://via.placeholder.com/400x200?text=Image+Not+Found'">
                    <div class="article-content">
                        <span class="category-tag">${article.category.toUpperCase()}</span>
                        <h2 class="article-title">${article.title}</h2>
                        <p class="article-excerpt">${article.excerpt}</p>
                        <div class="article-meta">
                            <span>${article.author}</span>
                            <span>${article.date}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Article form functions
        function openArticleForm(category) {
            if (!checkAdmin()) return;
            
            document.getElementById('articleFormTitle').textContent = 'Add New Article';
            document.getElementById('articleForm').reset();
            document.getElementById('articleId').value = '';
            document.getElementById('articleCategory').value = category;
            document.getElementById('deleteArticleBtn').style.display = 'none';
            document.getElementById('submitArticleBtn').textContent = 'Publish Article';
            document.getElementById('articleImages').innerHTML = '';
            document.getElementById('articlePanel').style.display = 'block';
        }

        function closeArticleForm() {
            document.getElementById('articlePanel').style.display = 'none';
        }

        function editArticle(id) {
            if (!checkAdmin()) return;
            
            const article = articles.find(a => a.id === id);
            if (!article) return;
            
            document.getElementById('articleFormTitle').textContent = 'Edit Article';
            document.getElementById('articleId').value = article.id;
            document.getElementById('articleCategory').value = article.category;
            document.getElementById('articleTitle').value = article.title;
            document.getElementById('articleAuthor').value = article.author;
            document.getElementById('articleImage').value = article.image;
            document.getElementById('articleExcerpt').value = article.excerpt;
            document.getElementById('articleContent').value = article.content;
            document.getElementById('deleteArticleBtn').style.display = 'block';
            document.getElementById('submitArticleBtn').textContent = 'Update Article';
            
            const imagesContainer = document.getElementById('articleImages');
            imagesContainer.innerHTML = '';
            if (article.additionalImages && article.additionalImages.length > 0) {
                article.additionalImages.forEach((img, index) => {
                    const row = createImageInputRow(img);
                    imagesContainer.appendChild(row);
                });
            }
            
            document.getElementById('articlePanel').style.display = 'block';
        }

        function createImageInputRow(value = '') {
            const row = document.createElement('div');
            row.className = 'image-input-row';
            row.innerHTML = `
                <input type="url" placeholder="https://example.com/image.jpg" value="${value}">
                <button type="button" class="remove-image-btn" onclick="this.parentElement.remove()">Remove</button>
            `;
            return row;
        }

        function addImageInput() {
            const container = document.getElementById('articleImages');
            container.appendChild(createImageInputRow());
        }

        function saveArticle(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const id = formData.get('id');
            const isEdit = id !== '';
            
            const imageInputs = document.querySelectorAll('#articleImages input[type="url"]');
            const additionalImages = Array.from(imageInputs)
                .map(input => input.value)
                .filter(url => url.trim() !== '');
            
            const articleData = {
                id: isEdit ? parseInt(id) : Date.now(),
                category: formData.get('category'),
                title: formData.get('title'),
                author: formData.get('author'),
                image: formData.get('image'),
                excerpt: formData.get('excerpt'),
                content: formData.get('content'),
                additionalImages: additionalImages,
                date: isEdit ? articles.find(a => a.id === parseInt(id)).date : new Date().toLocaleString('en-US', { 
                    month: 'short', 
                    day: 'numeric', 
                    year: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit'
                })
            };
            
            if (isEdit) {
                const index = articles.findIndex(a => a.id === parseInt(id));
                articles[index] = articleData;
            } else {
                articles.unshift(articleData);
            }
            
            localStorage.setItem('articles', JSON.stringify(articles));
            renderArticles();
            renderFeaturedArticle();
            closeArticleForm();
        }

        function confirmDeleteArticle(id) {
            if (!checkAdmin()) return;
            
            if (confirm('Are you sure you want to delete this article?')) {
                articles = articles.filter(a => a.id !== id);
                
                // Remove featured if this was the featured article
                if (parseInt(featuredArticleId) === id) {
                    featuredArticleId = null;
                    localStorage.removeItem('featuredArticleId');
                }
                
                // Remove comments for this article
                delete comments[id];
                localStorage.setItem('comments', JSON.stringify(comments));
                
                localStorage.setItem('articles', JSON.stringify(articles));
                renderArticles();
                renderFeaturedArticle();
            }
        }

        function deleteArticle() {
            if (!checkAdmin()) return;
            
            const id = parseInt(document.getElementById('articleId').value);
            if (confirm('Are you sure you want to delete this article?')) {
                articles = articles.filter(a => a.id !== id);
                
                if (parseInt(featuredArticleId) === id) {
                    featuredArticleId = null;
                    localStorage.removeItem('featuredArticleId');
                }
                
                delete comments[id];
                localStorage.setItem('comments', JSON.stringify(comments));
                localStorage.setItem('articles', JSON.stringify(articles));
                renderArticles();
                renderFeaturedArticle();
                closeArticleForm();
            }
        }

        // Ad functions
        function loadAds() {
            Object.keys(ads).forEach(adId => {
                const adElement = document.getElementById(adId);
                if (adElement && ads[adId]) {
                    if (ads[adId].height) {
                        adElement.style.height = ads[adId].height + 'px';
                    }
                    if (ads[adId].content) {
                        adElement.querySelector('.ad-content').innerHTML = ads[adId].content;
                    }
                }
            });
        }

        function editAd(adId) {
            if (!checkAdmin()) return;
            
            document.getElementById('adId').value = adId;
            const adData = ads[adId] || {};
            
            const adElement = document.getElementById(adId);
            const currentHeight = parseInt(adElement.style.height) || 250;
            
            document.getElementById('adHeight').value = currentHeight;
            document.getElementById('adContent').value = adData.content || '';
            document.getElementById('adPanel').style.display = 'block';
        }

        function closeAdForm() {
            document.getElementById('adPanel').style.display = 'none';
        }

        function saveAd(event) {
            event.preventDefault();
            const adId = document.getElementById('adId').value;
            const height = document.getElementById('adHeight').value;
            const content = document.getElementById('adContent').value;
            
            ads[adId] = { height: height, content: content };
            localStorage.setItem('ads', JSON.stringify(ads));
            
            const adElement = document.getElementById(adId);
            if (height) {
                adElement.style.height = height + 'px';
            }
            if (content) {
                adElement.querySelector('.ad-content').innerHTML = content;
            }
            
            closeAdForm();
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(event) {
            // Close article modal when clicking black background
            const articleModal = document.getElementById('articleModal');
            if (event.target === articleModal) {
                closeModal();
            }
            
            // Close admin panels when clicking background (but not when clicking inside)
            const panels = ['articlePanel', 'adPanel', 'featuredPanel', 'tabPanel'];
            panels.forEach(panelId => {
                const panel = document.getElementById(panelId);
                if (event.target === panel) {
                    panel.style.display = 'none';
                }
            });
        });

        // Article modal with comments
        function openArticle(id) {
            const article = articles.find(a => a.id === id);
            if (!article) return;
            
            currentArticleId = id;
            
            let contentHtml = article.content;
            
            // Replace [IMAGE1], [IMAGE2], etc. with actual images
            if (article.additionalImages && article.additionalImages.length > 0) {
                article.additionalImages.forEach((imgUrl, index) => {
                    const placeholder = `[IMAGE${index + 1}]`;
                    const imageTag = `<img src="${imgUrl}" alt="Article image ${index + 1}" onerror="this.style.display='none'" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;">`;
                    contentHtml = contentHtml.replace(new RegExp(placeholder, 'g'), imageTag);
                });
            }
            
            // Convert paragraphs
            contentHtml = contentHtml.split('\n\n').map(p => {
                // Don't wrap if it's already an image tag
                if (p.trim().startsWith('<img')) {
                    return p;
                }
                return `<p>${p}</p>`;
            }).join('');
            
            const modal = document.getElementById('articleModal');
            const content = document.getElementById('modalArticleContent');
            
            content.innerHTML = `
                <img src="${article.image}" alt="${article.title}" class="modal-image" onerror="this.src='https://via.placeholder.com/900x400?text=Image+Not+Found'">
                <span class="category-tag">${article.category.toUpperCase()}</span>
                <h1 class="modal-title">${article.title}</h1>
                <div class="modal-meta">
                    <span><strong>By</strong> ${article.author}</span>
                    <span>${article.date}</span>
                </div>
                <div class="modal-body">
                    ${contentHtml}
                </div>
            `;
            
            modal.style.display = 'block';
            loadComments(id);
        }

        function closeModal() {
            document.getElementById('articleModal').style.display = 'none';
            currentArticleId = null;
        }

        // Comment system
        function loadComments(articleId) {
            if (!comments[articleId]) {
                comments[articleId] = [];
            }
            renderComments();
        }

        function renderComments() {
            const commentsList = document.getElementById('commentsList');
            const articleComments = comments[currentArticleId] || [];
            
            if (articleComments.length === 0) {
                commentsList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸ’¬</div>
                        <div style="color: #999;">No comments yet. Be the first to share your thoughts!</div>
                    </div>
                `;
                return;
            }

            commentsList.innerHTML = articleComments.map(comment => renderComment(comment)).join('');
            attachCommentEventListeners();
        }

        function renderComment(comment, isReply = false) {
            const initial = comment.author[0].toUpperCase();
            const likeText = comment.likes > 0 ? `ðŸ‘ ${comment.likes}` : 'ðŸ‘ Like';
            const likedClass = comment.liked ? 'liked' : '';

            return `
                <div class="${isReply ? 'reply' : 'comment'}" data-comment-id="${comment.id}">
                    <div class="comment-header">
                        <div class="comment-avatar">${initial}</div>
                        <div class="comment-info">
                            <div class="comment-author">${comment.author}</div>
                            <div class="comment-time">${getTimeAgo(comment.time)}</div>
                        </div>
                    </div>
                    <div class="comment-body">${comment.text}</div>
                    <div class="comment-actions">
                        <button class="comment-action like-btn ${likedClass}" data-comment-id="${comment.id}">${likeText}</button>
                        <button class="comment-action reply-btn" data-comment-id="${comment.id}">Reply</button>
                    </div>
                    <div class="reply-composer" id="reply-composer-${comment.id}">
                        <textarea class="comment-input reply-input" placeholder="Add a reply..." id="reply-input-${comment.id}"></textarea>
                        <div class="composer-actions">
                            <button class="cancel-btn cancel-reply-btn" data-comment-id="${comment.id}">Cancel</button>
                            <button class="post-comment-btn submit-reply-btn" data-comment-id="${comment.id}">Reply</button>
                        </div>
                    </div>
                    ${comment.replies && comment.replies.length > 0 ? `
                        <div class="replies">
                            ${comment.replies.map(reply => renderComment(reply, true)).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function attachCommentEventListeners() {
            document.querySelectorAll('.like-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = parseInt(this.dataset.commentId);
                    toggleLike(commentId);
                });
            });

            document.querySelectorAll('.reply-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = parseInt(this.dataset.commentId);
                    showReplyComposer(commentId);
                });
            });

            document.querySelectorAll('.cancel-reply-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = parseInt(this.dataset.commentId);
                    hideReplyComposer(commentId);
                });
            });

            document.querySelectorAll('.submit-reply-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = parseInt(this.dataset.commentId);
                    submitReply(commentId);
                });
            });
        }

        function postComment() {
            const input = document.getElementById('mainCommentInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            if (!userName) {
                pendingComment = text;
                showNameModal();
                return;
            }
            
            addComment(text);
            input.value = '';
        }

        function addComment(text) {
            if (!comments[currentArticleId]) {
                comments[currentArticleId] = [];
            }
            
            const comment = {
                id: commentIdCounter++,
                author: userName,
                text: text,
                time: new Date(),
                likes: 0,
                liked: false,
                replies: []
            };

            comments[currentArticleId].unshift(comment);
            localStorage.setItem('comments', JSON.stringify(comments));
            renderComments();
        }

        function submitReply(commentId) {
            const replyInput = document.getElementById(`reply-input-${commentId}`);
            const replyText = replyInput.value.trim();
            
            if (!replyText) return;

            if (!userName) {
                pendingComment = replyText;
                pendingReplyTo = commentId;
                showNameModal();
                return;
            }

            addReply(commentId, replyText);
            replyInput.value = '';
        }

        function addReply(commentId, replyText) {
            const reply = {
                id: commentIdCounter++,
                author: userName,
                text: replyText,
                time: new Date(),
                likes: 0,
                liked: false,
                replies: []
            };

            const comment = findComment(commentId, comments[currentArticleId]);
            if (comment) {
                if (!comment.replies) comment.replies = [];
                comment.replies.push(reply);
                hideReplyComposer(commentId);
                localStorage.setItem('comments', JSON.stringify(comments));
                renderComments();
            }
        }

        function findComment(commentId, commentsList) {
            for (let comment of commentsList) {
                if (comment.id === commentId) return comment;
                if (comment.replies) {
                    const found = findComment(commentId, comment.replies);
                    if (found) return found;
                }
            }
            return null;
        }

        function toggleLike(commentId) {
            const comment = findComment(commentId, comments[currentArticleId]);
            if (comment) {
                comment.liked = !comment.liked;
                comment.likes += comment.liked ? 1 : -1;
                localStorage.setItem('comments', JSON.stringify(comments));
                renderComments();
            }
        }

        function showReplyComposer(commentId) {
            document.querySelectorAll('.reply-composer').forEach(composer => {
                composer.classList.remove('show');
            });
            
            const composer = document.getElementById(`reply-composer-${commentId}`);
            composer.classList.add('show');
            document.getElementById(`reply-input-${commentId}`).focus();
        }

        function hideReplyComposer(commentId) {
            const composer = document.getElementById(`reply-composer-${commentId}`);
            composer.classList.remove('show');
            document.getElementById(`reply-input-${commentId}`).value = '';
        }

        function clearCommentInput() {
            document.getElementById('mainCommentInput').value = '';
        }

        function showNameModal() {
            document.getElementById('nameModal').classList.add('show');
            document.getElementById('nameInput').focus();
        }

        function submitName() {
            const input = document.getElementById('nameInput');
            const name = input.value.trim();
            
            if (!name) {
                alert('Please enter your name');
                return;
            }
            
            userName = name;
            localStorage.setItem('userName', userName);
            document.getElementById('nameModal').classList.remove('show');
            input.value = '';
            
            if (pendingComment) {
                if (pendingReplyTo) {
                    addReply(pendingReplyTo, pendingComment);
                    pendingReplyTo = null;
                } else {
                    addComment(pendingComment);
                }
                pendingComment = null;
            }
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - new Date(date)) / 1000);
            
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return Math.floor(seconds / 60) + ' minutes ago';
            if (seconds < 86400) return Math.floor(seconds / 3600) + ' hours ago';
            if (seconds < 604800) return Math.floor(seconds / 86400) + ' days ago';
            
            return new Date(date).toLocaleDateString();
        }

        // Tab Management
        function openTabManager() {
            renderCurrentTabs();
            document.getElementById('tabPanel').style.display = 'block';
        }

        function closeTabManager() {
            document.getElementById('tabPanel').style.display = 'none';
            document.getElementById('tabForm').reset();
        }

        function renderCurrentTabs() {
            const container = document.getElementById('currentTabsList');
            
            if (customTabs.length === 0) {
                container.innerHTML = '<p style="color: #999; font-size: 14px;">No custom tabs yet. Default tabs (Home, Business, Sports) cannot be removed.</p>';
                return;
            }
            
            container.innerHTML = customTabs.map((tab, index) => `
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: #f8f8f8; border-radius: 6px; margin-bottom: 10px;">
                    <div>
                        <strong>${tab.name}</strong>
                        <span style="color: #666; font-size: 13px; margin-left: 10px;">
                            ${tab.type === 'link' ? `â†’ ${tab.link}` : '(Article Category)'}
                        </span>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="editTab(${index})" style="background: #666; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">Edit</button>
                        <button onclick="deleteTab(${index})" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function addTab(event) {
            event.preventDefault();
            
            const name = document.getElementById('tabName').value.trim();
            const type = document.getElementById('tabType').value;
            const link = document.getElementById('tabLink').value.trim();
            
            if (!name) {
                alert('Please enter a tab name');
                return;
            }
            
            if (type === 'link' && !link) {
                alert('Please enter a URL for external links');
                return;
            }
            
            const newTab = {
                name: name,
                type: type,
                view: type === 'category' ? name.toLowerCase().replace(/\s+/g, '-') : null,
                link: type === 'link' ? link : null
            };
            
            customTabs.push(newTab);
            localStorage.setItem('customTabs', JSON.stringify(customTabs));
            
            renderTabs();
            renderCurrentTabs();
            
            if (type === 'category') {
                renderCustomColumns();
            }
            
            document.getElementById('tabForm').reset();
            document.getElementById('tabLinkGroup').style.display = 'none';
            
            alert(`Tab "${name}" added successfully!`);
        }

        function editTab(index) {
            const tab = customTabs[index];
            document.getElementById('tabName').value = tab.name;
            document.getElementById('tabType').value = tab.type;
            
            if (tab.type === 'link') {
                document.getElementById('tabLinkGroup').style.display = 'block';
                document.getElementById('tabLink').value = tab.link;
            }
            
            // Remove the old tab
            customTabs.splice(index, 1);
            localStorage.setItem('customTabs', JSON.stringify(customTabs));
            renderCurrentTabs();
        }

        function deleteTab(index) {
            const tab = customTabs[index];
            if (confirm(`Are you sure you want to delete the "${tab.name}" tab?`)) {
                customTabs.splice(index, 1);
                localStorage.setItem('customTabs', JSON.stringify(customTabs));
                renderTabs();
                renderCurrentTabs();
                renderCustomColumns();
            }
        }

        function renderCustomColumns() {
            const mainContent = document.querySelector('.main-content');
            
            // Remove old custom columns
            document.querySelectorAll('.custom-column').forEach(col => col.remove());
            
            // Add new custom columns for category tabs
            customTabs.filter(tab => tab.type === 'category').forEach(tab => {
                const col = document.createElement('div');
                col.className = 'custom-column business-column';
                col.setAttribute('data-category', tab.view);
                col.style.display = 'none';
                col.innerHTML = `
                    <div class="column-header">
                        <h2 class="column-title">${tab.name}</h2>
                        <button class="add-article-btn" onclick="openArticleFormCustom('${tab.view}')">+ Add Article</button>
                    </div>
                    <div class="articles-list" id="${tab.view}Articles">
                        <div style="color: #999; padding: 20px; text-align: center;">No ${tab.name.toLowerCase()} articles yet. Click "+ Add Article" to create one.</div>
                    </div>
                `;
                
                // Insert before sidebar
                const sidebar = mainContent.querySelector('.sidebar');
                mainContent.insertBefore(col, sidebar);
            });
            
            renderArticles();
        }

        function openArticleFormCustom(category) {
            if (!checkAdmin()) return;
            
            document.getElementById('articleFormTitle').textContent = 'Add New Article';
            document.getElementById('articleForm').reset();
            document.getElementById('articleId').value = '';
            document.getElementById('articleCategory').value = category;
            document.getElementById('deleteArticleBtn').style.display = 'none';
            document.getElementById('submitArticleBtn').textContent = 'Publish Article';
            document.getElementById('articleImages').innerHTML = '';
            document.getElementById('articlePanel').style.display = 'block';
        }

        // Initialize on load
        init();
    </script>
</body>
</html>